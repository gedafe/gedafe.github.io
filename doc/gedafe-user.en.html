<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="en">
<HEAD>
<META name="generator" content="HTML Tidy, see www.w3.org">
<TITLE>Frontend Manual</TITLE>
<SCRIPT type="text/javascript" language="JavaScript">
<!-- Hiding the code
function nb_imgNormal(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_n.src');
        self.status = '';
    }
}
function nb_imgSelect(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_s.src');
        self.status = '';
    }
}
function nb_imgOver(imgName, nohints, descript) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_o.src');
        if (! nohints) self.status = descript;
    }
}
// done hiding -->
</SCRIPT>

<STYLE type="text/css">
<!--
H1,H2,H3 {color: #4f4f4f}
A {text-decoration: underline;
   color: #f00ca4}
HR, H1, H2, DIV, P, LI,
UL, OL, TABLE, TD, TR {font-family: lucida-sans, helvetica, arial, sans-serif}
PRE {font-family: courier, typewriter, fixed}
H1 {font-size: 18pt }
H2 {font-size: 16pt }
DIV, P, LI,
UL, OL, TABLE, TD, TR {font-size: 12pt }
SMALL {font-size: 10pt}
-->
</STYLE>

<TITLE>gedafe-user - the Generic Database Front-End User-Manual</TITLE>
<LINK rev="made" href="mailto:dws@ee.ethz.ch">
</HEAD>
<BODY bgcolor="#bfbfbf" text="#000000" link="#f00ca4" vlink="#f00ca4" alink="#f00ca4">
<TABLE border="0" bgcolor="#ffffff" cellpadding="0" cellspacing="0" summary="">
<TR>
<TD valign="top">
<TABLE border="0" bgcolor="#ffffff" cellpadding="0" cellspacing="0" summary="">
<TR>
<TD rowspan="5" width="20"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="20" height="1" align="bottom" border="0"></TD>
<TD colspan="4"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="10" align="bottom" border="0"></TD>
</TR>

<TR>
<TD colspan="4" valign="top" align="left"><IMG src="../.pics/logo.png" alt="" width="390" height="70"></TD>
</TR>

<TR>
<TD colspan="4"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="20" align="bottom" border="0"></TD>
</TR>

<TR>
<TD rowspan="2" width="120" valign="top">
<DIV><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="50" align="bottom" border="0"></DIV>

<SCRIPT type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_about_n = new Image();
    nb_img1_about_n.src = '../.img/about-std.en.gif';
    nb_img1_about_o = new Image();
    nb_img1_about_o.src = '../.img/about-ovr.en.gif';
    nb_img1_doc_n = new Image();
    nb_img1_doc_n.src = '../.img/doc-std.en.gif';
    nb_img1_doc_o = new Image();
    nb_img1_doc_o.src = '../.img/doc-ovr.en.gif';
    nb_img1_screenshots_n = new Image();
    nb_img1_screenshots_n.src = '../.img/screenshots-std.en.gif';
    nb_img1_screenshots_o = new Image();
    nb_img1_screenshots_o.src = '../.img/screenshots-ovr.en.gif';
    nb_img1_download_n = new Image();
    nb_img1_download_n.src = '../.img/download-std.en.gif';
    nb_img1_download_o = new Image();
    nb_img1_download_o.src = '../.img/download-ovr.en.gif';
    nb_img1_people_n = new Image();
    nb_img1_people_n.src = '../.img/people-std.en.gif';
    nb_img1_people_o = new Image();
    nb_img1_people_o.src = '../.img/people-ovr.en.gif';
    nb_img1_mailinglist_n = new Image();
    nb_img1_mailinglist_n.src = '../.img/mailinglist-std.en.gif';
    nb_img1_mailinglist_o = new Image();
    nb_img1_mailinglist_o.src = '../.img/mailinglist-ovr.en.gif';
}
// done hiding -->
</SCRIPT>

 

<DIV><A href="../index.en.html" onmouseover="nb_imgOver('nb_img1_about', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_about'); return true" onfocus="nb_imgOver('nb_img1_about', 0, ''); return true" onblur="nb_imgNormal('nb_img1_about'); return true"><IMG name="nb_img1_about" src="../.img/about-std.en.gif" alt="About" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../doc/index.en.html" onmouseover="nb_imgOver('nb_img1_doc', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc'); return true" onfocus="nb_imgOver('nb_img1_doc', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc'); return true"><IMG name="nb_img1_doc" src="../.img/doc-std.en.gif" alt="Documentation" border="0" width="120" height="25"></A></DIV>

<SCRIPT type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_doc_database_n = new Image();
    nb_img1_doc_database_n.src = '../.img/doc_database-std.en.gif';
    nb_img1_doc_database_o = new Image();
    nb_img1_doc_database_o.src = '../.img/doc_database-ovr.en.gif';
    nb_img1_doc_pearls_n = new Image();
    nb_img1_doc_pearls_n.src = '../.img/doc_pearls-std.en.gif';
    nb_img1_doc_pearls_o = new Image();
    nb_img1_doc_pearls_o.src = '../.img/doc_pearls-ovr.en.gif';
    nb_img1_doc_pearlreports_n = new Image();
    nb_img1_doc_pearlreports_n.src = '../.img/doc_pearlreports-std.en.gif';
    nb_img1_doc_pearlreports_o = new Image();
    nb_img1_doc_pearlreports_o.src = '../.img/doc_pearlreports-ovr.en.gif';
    nb_img1_doc_cpptemplate_n = new Image();
    nb_img1_doc_cpptemplate_n.src = '../.img/doc_cpptemplate-std.en.gif';
    nb_img1_doc_cpptemplate_o = new Image();
    nb_img1_doc_cpptemplate_o.src = '../.img/doc_cpptemplate-ovr.en.gif';
}
// done hiding -->
</SCRIPT>

 

<DIV><IMG src="../.img/doc_frontend-sel.en.gif" alt="..Frontend" width="120" height="20"></DIV>

<DIV><A href="../doc/gedafe-sql.en.html" onmouseover="nb_imgOver('nb_img1_doc_database', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_database'); return true" onfocus="nb_imgOver('nb_img1_doc_database', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_database'); return true"><IMG name="nb_img1_doc_database" src="../.img/doc_database-std.en.gif" alt="..Database" border="0" width="120" height="20"></A></DIV>

<DIV><A href="../doc/gedafe-pearls.en.html" onmouseover="nb_imgOver('nb_img1_doc_pearls', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_pearls'); return true" onfocus="nb_imgOver('nb_img1_doc_pearls', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_pearls'); return true"><IMG name="nb_img1_doc_pearls" src="../.img/doc_pearls-std.en.gif" alt="..Gedafe Pearls" border="0" width="120" height="20"></A></DIV>

<DIV><A href="../doc/pearlreports.en.html" onmouseover="nb_imgOver('nb_img1_doc_pearlreports', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_pearlreports'); return true" onfocus="nb_imgOver('nb_img1_doc_pearlreports', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_pearlreports'); return true"><IMG name="nb_img1_doc_pearlreports" src="../.img/doc_pearlreports-std.en.gif" alt="..PearlReports" border="0" width="120" height="20"></A></DIV>

<DIV><A href="../doc/CPPTemplate.en.html" onmouseover="nb_imgOver('nb_img1_doc_cpptemplate', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_cpptemplate'); return true" onfocus="nb_imgOver('nb_img1_doc_cpptemplate', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_cpptemplate'); return true"><IMG name="nb_img1_doc_cpptemplate" src="../.img/doc_cpptemplate-std.en.gif" alt="..CPPTemplate" border="0" width="120" height="20"></A></DIV>

<DIV><A href="../screenshots.en.html" onmouseover="nb_imgOver('nb_img1_screenshots', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_screenshots'); return true" onfocus="nb_imgOver('nb_img1_screenshots', 0, ''); return true" onblur="nb_imgNormal('nb_img1_screenshots'); return true"><IMG name="nb_img1_screenshots" src="../.img/screenshots-std.en.gif" alt="Screenshots" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../download.en.html" onmouseover="nb_imgOver('nb_img1_download', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_download'); return true" onfocus="nb_imgOver('nb_img1_download', 0, ''); return true" onblur="nb_imgNormal('nb_img1_download'); return true"><IMG name="nb_img1_download" src="../.img/download-std.en.gif" alt="Download" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../people.en.html" onmouseover="nb_imgOver('nb_img1_people', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_people'); return true" onfocus="nb_imgOver('nb_img1_people', 0, ''); return true" onblur="nb_imgNormal('nb_img1_people'); return true"><IMG name="nb_img1_people" src="../.img/people-std.en.gif" alt="People" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../mailinglist.en.html" onmouseover="nb_imgOver('nb_img1_mailinglist', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_mailinglist'); return true" onfocus="nb_imgOver('nb_img1_mailinglist', 0, ''); return true" onblur="nb_imgNormal('nb_img1_mailinglist'); return true"><IMG name="nb_img1_mailinglist" src="../.img/mailinglist-std.en.gif" alt="Mailing List" border="0" width="120" height="25"></A></DIV>

<DIV><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="60" align="bottom" border="0"></DIV>

<DIV><SMALL>Page Maintainer:<BR>
 <IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="10" height="1" align="bottom" border="0"><A href="mailto:dws@ee.ethz.ch">David Schweikert</A></SMALL></DIV>

<DIV><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="10" align="bottom" border="0"><BR>
 <SMALL>Last Update:<BR>
<IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="10" height="1" align="bottom" border="0">2003-09-29</SMALL></DIV>
</TD>
<TD rowspan="2" width="30"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="30" height="1" align="bottom" border="0"></TD>
<TD valign="top">
<DIV><IMG src="../.img/Frontend_Manual_H1.en.gif" alt="Frontend Manual" width="500" height="50"></DIV>

<P><A name="__index__"></A></P>

<!-- INDEX BEGIN -->
<UL>
<LI><A href="#name">NAME</A></LI>

<LI><A href="#description">DESCRIPTION</A></LI>

<LI style="list-style: none">
<UL>
<LI><A href="#features">Features</A></LI>
</UL>
</LI>

<LI><A href="#installation">INSTALLATION</A></LI>

<LI style="list-style: none">
<UL>
<LI><A href="#the_application_script">The Application Script</A></LI>

<LI><A href="#the_gedafed_daemon">The gedafed Daemon</A></LI>

<LI><A href="#the_database">The Database</A></LI>
</UL>
</LI>

<LI><A href="#usage">USAGE</A></LI>

<LI style="list-style: none">
<UL>
<LI><A href="#authentication">Authentication</A></LI>

<LI><A href="#forms_and_navigation">Forms and Navigation</A></LI>

<LI><A href="#searching">Searching</A></LI>

<LI><A href="#html_layout">HTML Layout</A></LI>

<LI><A href="#postgres_schema_support">Postgres Schema support</A></LI>

<LI><A href="#caching_and_bookmarks">Caching and Bookmarks</A></LI>
</UL>
</LI>

<LI><A href="#troubleshooting">TROUBLESHOOTING</A></LI>

<LI style="list-style: none">
<UL>
<LI><A href="#edit_form_is_empty">Edit form is empty</A></LI>
</UL>
</LI>

<LI><A href="#see_also">SEE ALSO</A></LI>

<LI><A href="#copyright">COPYRIGHT</A></LI>

<LI><A href="#license">LICENSE</A></LI>

<LI><A href="#author">AUTHOR</A></LI>
</UL>

<!-- INDEX END -->
<HR>
<H1><A name="name">NAME</A></H1>

<P>gedafe-user - the Generic Database Front-End (Gedafe) User-Manual</P>

<HR>
<H1><A name="description">DESCRIPTION</A></H1>

<P>Gedafe (the Generic Database Front-End) is a web-based database front-end that is database-application independent. That means that the (perl) code doesn't contain any information about what tables are present in the database or how the data is organized.</P>

<P>This is only possible if a full-featured SQL dB server like PostgreSQL is used as backend. PostgreSQL permits to define not only the format of the various tables and fields, but also how tables are related to each other. It is even possible to write powerful functions inside the database which get executed as new data is accessed or modified. Together, these features allow the implementation of data integrity constraints inside the database itself.</P>

<P>The effect of this is, that the database server guarantees the integrity of the database, independently from the software used to access the database. A front-end can read all the integrity constraints directly off the database and enforce them itself in order to provide faster response to the user, but at the end of the day the database server will only accept data which follow the rules defined by the database programmer.</P>

<P>Overall, this approach makes the creation and maintenance of database applications much simpler. New databases can be created on the database server alone, using the language which is best suited for this task: SQL. The front-end then comes almost for free.</P>

<H2><A name="features">Features</A></H2>

<P>Gedafe has the following features:</P>

<UL>
<LI style="list-style: none">It is completely <EM>generic</EM>. Gedafe does not need to know anything about the structure or contents of the database it is working with.</LI>

<LI style="list-style: none"><EM>Authentication</EM> is done at the database-level.</LI>

<LI style="list-style: none">It is URL transparent. This means, you can directly access the URL of the page you want to look at. If necessary, the login screen will pop up and after a successful login you will be presented the page you initially requested.</LI>

<LI style="list-style: none">Almost no HTML is used in the front-end code. External template files define the look and feel of pages.</LI>

<LI style="list-style: none">POST is used only for data that modifies the database. Every page has a distinct URL, which makes them storable as bookmarks (Deep Linking).</LI>

<LI style="list-style: none"><EM>Double form protection</EM>. The front-end prevents accidental repeated submission of the same form. This is implemented using a unique serial number for each form.</LI>

<LI style="list-style: none">Using the PearlReports integration, it is possible to write custom multilevel report modules (Pearls) available from the Gedafe webinterface.</LI>
</UL>

<HR>
<H1><A name="installation">INSTALLATION</A></H1>

<P>The structure of the Gedafe distribution is as follows:</P>

<PRE>
 .
 |-- bin/             binaries (gedafed daemon)
 |-- doc/             documentation
 |-- lib/
 |   `-- perl/
 |       |-- Gedafe/  gedafed main source
 |       |-- DBIx/    PearlReports (required for gedafe pearls)
 |       `-- Text/    CPPTemplates (required for gedafe screen layout)
 `-- example
     |-- templates/   HTML templates
     |-- mypearls/    Sample pearl report module
     |-- demo1.cgi    demo-application  script
     `-- demo1.sql    PostgreSQL script to initialize the
                      demo-application database
</PRE>

<P>In order to start using gedafe you must ensure that <EM>lib/perl</EM> of the Gedafe distribution is found by <EM>perl</EM> and start the <EM>gedafed</EM> daemon (you can use the script gedafed-ctl to start it with SYSV-init).</P>

<H2><A name="the_application_script">The Application Script</A></H2>

<P>Gedafe is actually a library. The application itself just calls the 'Start' function of the library, providing the necessary configuration information as arguments. The application startup script should look as follows:</P>

<PRE>
 
 use lib "/usr/local/gedafe/lib/perl";
 
 use Gedafe::Start;
 
 Start(
        db_datasource  =&gt; 'dbi:Pg:dbname=demo',
        list_rows      =&gt; 15,
        templates      =&gt; '/usr/local/gedafe/templates/demo',
        documentation_url =&gt; '<A href="http://mysite.com/demo-docs">http://mysite.com/demo-docs</A>',
        show_row_count =&gt; 1,
        isearch        =&gt; '/place/in/the/webtree/for/isearch.jar',
        pearl_dir      =&gt; '/usr/local/gedafe/example/mypearls',
        oyster_dir      =&gt; '/usr/local/gedafe/example/myoysters',
        list_buttons   =&gt; 'both',
        edit_buttons_left =&gt; 1,
        file2fs_dir     =&gt; '/var/gedafe/upload_dir',
 );
</PRE>

<P>Gedafe gathers information about the database structure when it is started. This process can take a lot of time, it is therefor strongly suggested that you use a persistent perl instance, for example <EM>speedy</EM>. <EM>mod_perl</EM> works also great, but you have to be careful if you run multiple database applications, since if the same persistent perl is used, the cached data of the applications will go in the same global variables, which is certainly not what you want.</P>

<P>Of course, you must specify the correct path name to your perl interpreter in the first line of the script (unless you use a webserver perl module).</P>

<P>Very important in this script is the first 'use' statement. It should point to where you have stored <EM>lib/perl</EM> of the distribution. <EM>Start</EM> starts the application by specifying Gedafe configuration variables. The following configuration variables are defined:</P>

<DL>
<DT><STRONG><A name="item_db_datasource">db_datasource</A></STRONG><BR>
</DT>

<DD>DBI data-source string specifying the database.</DD>

<DT><STRONG><A name="item_list_rows">list_rows</A></STRONG><BR>
</DT>

<DD>Default number of rows to show.</DD>

<DT><STRONG><A name="item_templates">templates</A></STRONG><BR>
</DT>

<DD>The directory where the html templates are stored (you can use a copy <EM>example/templates</EM> as a basis for you local modifications).</DD>

<DT><STRONG><A name="item_documentation_url">documentation_url</A></STRONG><BR>
</DT>

<DD>URL passed to the html templates where the documentation of the application is stored.</DD>

<DT><STRONG><A name="item_show_row_count">show_row_count</A></STRONG><BR>
</DT>

<DD>Options: [0,1] If set, show a count of total records returned by each select, along with extra navigation links to skip to first and last pages of result set. Since this produces slightly higher database overhead (an added SELECT <CODE>COUNT(*)</CODE> for every SELECT), it is turned off by default.</DD>

<DT><STRONG><A name="item_isearch">isearch</A></STRONG><BR>
</DT>

<DD>Web-servers don't like Java archives (jar) to be down-loaded from cgi-bin directory's. They will try to execute them instead. To resolve this, you have to place the 'incremental search widget' (isearch) Java archive in a place where it can be down-loaded like any other file. This item is used to point gedafe to the place where you have put the isearch.jar. Please make sure that it is on the same server and preferably a relative address. Java security restrictions require this.</DD>

<DT><STRONG><A name="item_list_buttons">list_buttons</A></STRONG><BR>
</DT>

<DD>Options: ['top','bottom','both','none'] This option acts on the buttons that appear with table or view lists, the first,previous,add,next,last buttons. Top selects only buttons above the list. Bottom selects only buttons below the list. None removes all buttons, but doing so wouldn't make much sense. When omitted the default is 'both'.</DD>

<DT><STRONG><A name="item_widget_dir">widget_dir</A></STRONG><BR>
</DT>

<DD>Name of a directory where gedafe should go looking for extra widgets. See <EM>gedafe-widget.pod</EM> for more information.</DD>

<DT><STRONG><A name="item_pearl_dir">pearl_dir</A></STRONG><BR>
</DT>

<DD>Name of a directory where gedafe should go looking for pearls. Pearls are object oriented perl modules which first display a data input screen and then run a report off the database based on the entires given at the data entry screen. See <EM>gedafe-pearls.pod</EM> for more information.</DD>

<DT><STRONG><A name="item_oyster_dir">oyster_dir</A></STRONG><BR>
</DT>

<DD>Name of a directory where gedafe should go looking for Oysters. Oysters are object oriented perl modules which allow developers to implement mini-applications while concentrating on the task at hand rather than the gotcha's of html-based software engineering. See <EM>gedafe-oysters.pod</EM> for more information.</DD>

<DT><STRONG><A name="item_file2fs_dir">file2fs_dir</A></STRONG><BR>
</DT>

<DD>If you use the file2fs widet for uploading files you have to specify the root directory for the uploads otherwhise uploads will be disabled. See the file2fs widget for more information.</DD>

<DT><STRONG><A name="item_schema">schema</A></STRONG><BR>
</DT>

<DD>See ``Schema Support''</DD>

<DT><STRONG><A name="item__22schema_search_path_22">``schema_search_path''</A></STRONG><BR>
</DT>

<DD>See ``Schema Support''</DD>

<DT><STRONG><A name="item__22parsed_search_22">``parsed_search''</A></STRONG><BR>
</DT>

<DD>When set to 1 enables the parsed way of searching even when Parse::RecDescent is present on the system. See also: gedafe-search.pod</DD>

<DT><STRONG><A name="item_edit_buttons_left">edit_buttons_left</A></STRONG><BR>
</DT>

<DD>If set to 1, the buttons for edit, clone and delete are shown on the left, which is useful for very wide tables.</DD>

<DT><STRONG><A name="item_edit_show_id">edit_show_id</A></STRONG><BR>
</DT>

<DD><EM>edit_show_id</EM> = 'edit' makes the id column visible in EDIT screens. (<EM>edit_show_id</EM> = 'edit+add' makes the id column visible also in NEW screens. This has the side effect of incrementing serial id's even if you abort inserting a new value. Also the id jumps in steps of 2) The id is always ``read-only''. This can be used in two ways:</DD>

<DD>
<UL>
<LI style="list-style: none">The id column has a default, but you want to know the id value while editing (or inserting) a record.</LI>

<LI style="list-style: none">You want editable id values or you want to supply the id values by hand. This will not work. In this case we recommend to use a HID column.</LI>
</UL>
</DD>
</DL>

<H2><A name="the_gedafed_daemon">The gedafed Daemon</A></H2>

<P>Gedafe uses an external process called gedafed to manage session data. This daemon must be running to make Gedafe work. You can start it during the boot process of your server using the bin/gedafed-ctl script.</P>

<H2><A name="the_database">The Database</A></H2>

<P><EM>gedafe-sql.pod</EM> describes how the database should be setup to work with Gedafe.</P>

<HR>
<H1><A name="usage">USAGE</A></H1>

<H2><A name="authentication">Authentication</A></H2>

<P>Authentication is done with the help of gedafed. This daemon stores user/password pairs using a random-generated ``ticket'', which is stored in a cookie on the client side. To make these tickets more secure gedafed manages an expiration on these tickets. Every time that ticket is used, it's expiration is prolonged by a certain amount of seconds (configured in the script). If the database isn't accessed for a certain amount of time, the ticket is expired and a new login must be made.</P>

<P>The login screen is transparent to the page accessed: whenever a login is needed, the login screen is first presented, after which the requested page is shown.</P>

<P>Warning: Gedafe will not work with blank passwords. If you want to do anonymous logins, you may put the user in the url (as an additional parameter, user=xxx&amp;...) and the password sent to the database will be 'anonymous'.</P>

<H2><A name="forms_and_navigation">Forms and Navigation</A></H2>

<P>The navigation and general use of Gedafe should be straightforward. At the beginning, you are presented with the ``Entry'' page that contains links to every table to edit and to every available report.</P>

<P>For forms, the guiding principle while designing Gedafe was 'POST is evil, use it the least possible'. The reason for it is that if a generated page depends on POST data, that page can't be stored in a bookmark and the browsers have problems handling the reloading of pages obtained with a POST request. For that reason, POST was used only for database-modifying actions where large amounts of data must be transferred.</P>

<H2><A name="searching">Searching</A></H2>

<P>You can search on multiple fields, which are represented in the list view as multiple text fields on different lines. Each field must match. In each of the fields, you can type a search term using the following syntax:</P>

<DL>
<DT><STRONG><A name="item_text">text</A></STRONG><BR>
</DT>

<DD>simple 'ILIKE' matching of the selected field</DD>

<DT><STRONG><A name="item_op_text">OP text</A></STRONG><BR>
</DT>

<DD>use OP instead of 'ILIKE'. Can be '&lt;', '&lt;=', '&gt;', '&gt;=', '=', '~'.</DD>

<DT><STRONG><A name="item_not_expr">NOT expr</A></STRONG><BR>
</DT>

<DD>Negate expression</DD>

<DT><STRONG><A name="item_is__5bnot_5d_null">is [not] null</A></STRONG><BR>
</DT>
</DL>

<P>Further, you can also join such expressions with 'OR' and 'AND. For example:</P>

<PRE>
 &gt; 2004-01-01 and &lt; 2004-12-31
</PRE>

<H2><A name="html_layout">HTML Layout</A></H2>

<P>Almost no HTML is used in the perl code. The HTML is generated with the help of Text::CPPTemplate, a very simple C-preprocessor-style templating system included in the Gedafe distribution. The templates are taken from a directory specified in the startup script with the 'templates' parameter.</P>

<P>The basic idea is that Gedafe places small ``elements'' of the page currently being generated such as the header or the cell of a table by only specifying variables (properties) of that element. Every element has always the following minimal variables specified:</P>

<DL>
<DT><STRONG><A name="item_page">PAGE</A></STRONG><BR>
</DT>

<DD>Name of the page (for example <EM>login</EM>, <EM>entry</EM> or <EM>list</EM>).</DD>

<DT><STRONG><A name="item_element">ELEMENT</A></STRONG><BR>
</DT>

<DD>Name of the element (for example <EM>header</EM> or <EM>td</EM>).</DD>
</DL>

<P>In addition, element-specific data such as <EM>DATA</EM> for the <EM>td</EM> element must be defined. Text::CPPTemplate will then search for an appropriate template to use and generate the HTML code. See <A href="/Text/CPPTemplate(3).html">the Text::CPPTemplate(3) manpage</A> for a description of the syntax and how the templates are stored in files. See also <EM>gedafe-templates.txt</EM> for a description of what elements are used with what variables.</P>

<H2><A name="postgres_schema_support">Postgres Schema support</A></H2>

<P>It is possible to use schema support if Postgres is Version 7.2 or newer. For database versions &lt; 7.2 schema support is disabled. No test have be done yet if Postgres versions &lt; 7.2 really work after introdution of schema support.</P>

<P>A schema is a group of tables in postgres. You can order your tables by moving them in several schemas without changing views and select statements.</P>

<P>If you add more then one schema to your gedafe application, the top of the Entry screen shows links into the other schemas instead of table links.</P>

<P>Schema support is activated with 2 optional config parameters for Start.pm. These values are:</P>

<DL>
<DT><STRONG><A name="item__22schema_22">``schema''</A></STRONG><BR>
</DT>

<DD>defines the default schema, i.e. the schema we want to start in. Gedafe only shows you tables in the ``current'' schema. The current schema is the default schema if defined else 'public'. You can override the default schema with the URL parameter <EM>schema=</EM>.</DD>

<DT><STRONG>``schema_search_path''</STRONG><BR>
</DT>
</DL>

<P>Syntax: A comma separated list of single quoted schema names like <STRONG>``'public','test''</STRONG>. Is ignored, if <EM>schema</EM> is not set.</P>

<P>Defines the group of schemas we want to make accesible for gedafe. To be exact, all tables are acessible by prefixing their schema name (e.g. <EM>testschema.testtable</EM> is table <EM>testtable</EM> in schema <EM>testschema</EM>). You can use schema prefixes in sql commands, e.g. in views. But gedafe itself does not prefix table names. To reference tables from more then the 'public' schema, we have to put the schema names in a <EM>schema_search_path</EM>.</P>

<P>When setting a <EM>schema_search_path</EM>, you only will see links for tables in the ``actual'' schema but you can access all tables within the search path by their names as if they were in the current schema.</P>

<P>CAVEAT: Beware of name collisions.</P>

<P>Never put 2 tables with the same name in two schemas (inside your search path), as the results can be hard to predict. Also always put <EM>'public'</EM> in your schema search path. Put the tables <EM>meta_fields</EM> and <EM>meta_tables</EM> in the <EM>'public'</EM> schema. The effects of having several <EM>meta_fields</EM> and <EM>meta_tables</EM> will be hard to predict.</P>

<PRE>
=head2 Hidden features
</PRE>

<UL>
<LI style="list-style: none">In the URL: <CODE>list_rows=nn</CODE> override the number-of-displayed-rows specified in the startup script.</LI>

<LI style="list-style: none">In the URL: <CODE>theme=xxx</CODE> set the theme (templates will be loaded from that subdirectory of the templates directory)</LI>

<LI style="list-style: none">In the URL: <CODE>reload=1</CODE> reset all the cached data. This is useful, for example, if you changed a template file or the structure of the database.</LI>

<LI style="list-style: none"><CODE>today</CODE> or <CODE>yesterday</CODE> can be specified as search value for a 'Date' field.</LI>

<LI style="list-style: none">Numbers can be entered as <CODE>hh:mm</CODE> (for example <CODE>0:10</CODE>). The <CODE>mm</CODE> part will be multiplied by 100/60 and added to <CODE>hh</CODE>.</LI>

<LI style="list-style: none">Some supporting perl modules are auto-detected and only used if they are installed on the system gedafe is running on. These are currently: 

<DL>
<DT><STRONG><A name="item__2d">-</A></STRONG><BR>
</DT>

<DD>Text::CSV_XS : for exporting data as comma-separated value (CSV) format; if not installed, only the default tab-delimited format will be available for exporting data.</DD>
</DL>
</LI>
</UL>

<H2><A name="caching_and_bookmarks">Caching and Bookmarks</A></H2>

<P>A difficulty that we encountered while developing Gedafe was the caching of pages by the browser. We have to control precisely when a page can be cached and when not. The implementation is made with the <CODE>refresh</CODE> URL parameter: when it is set, the expiration of the page is set to some positive value, meaning that the page can be cached. If <CODE>refresh</CODE> is not available, the expiration is negative, meaning that the page should not be cached. The value of <CODE>refresh</CODE> is a random number, that can be changed to force a reload of the page.</P>

<P>A side-effect of this technique is that pages with <CODE>refresh</CODE> in the URL are not suitable to be stored as bookmarks, since you would then get always the same cached version. For that reason, bookmarks should be always saved without the <CODE>refresh</CODE> parameter, such that a new version of the page is always requested from the server. There is a link on every page, that you can drag to store the currently viewed page.</P>

<HR>
<H1><A name="troubleshooting">TROUBLESHOOTING</A></H1>

<H2><A name="edit_form_is_empty">Edit form is empty</A></H2>

<P>When you get an empty form after selecting 'Edit' for a record, this could mean that you didn't put the record *_id into the first column of the presentation (*_list) view or the table (if there isn't a presentation view). Gedafe must know the id of the record to edit and it does so by using the first column as key. See the <EM>gedafe-sql.pod</EM>, section 'Presentation View'.</P>

<HR>
<H1><A name="see_also">SEE ALSO</A></H1>

<P><EM>gedafe-sql.pod</EM>, <EM>gedafe-templates.txt</EM>, <EM>Text::CPPTemplate</EM>, <EM>gedafe-pearls.pod</EM>, <EM>DBIx::PearlReports</EM></P>

<HR>
<H1><A name="copyright">COPYRIGHT</A></H1>

<P>Copyright (c) 2000-2003 ETH Zurich, All rights reserved.</P>

<HR>
<H1><A name="license">LICENSE</A></H1>

<P>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</P>

<P>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</P>

<P>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</P>

<HR>
<H1><A name="author">AUTHOR</A></H1>

<P>Tobias&nbsp;Oetiker, David&nbsp;Schweikert, Fritz&nbsp;Zaucker, Adi&nbsp;Fairbank, Freek&nbsp;Zindel</P>

&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</TD>
<TD rowspan="2" widht="0"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="0" height="1" align="bottom" border="0"></TD>
</TR>

<TR>
<TD><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="20" align="bottom" border="0"></TD>
</TR>
</TABLE>
</TD>
<TD valign="TOP" align="RIGHT"><IMG src="../.img/frontend_manual_Decor.en.gif" alt="" width="100" height="600"></TD>
</TR>
</TABLE>
</BODY>
</HTML>

