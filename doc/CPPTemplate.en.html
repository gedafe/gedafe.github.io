<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="en">
<HEAD>
<META name="generator" content="HTML Tidy, see www.w3.org">
<TITLE>CPPTemplate</TITLE>
<SCRIPT type="text/javascript" language="JavaScript">
<!-- Hiding the code
function nb_imgNormal(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_n.src');
        self.status = '';
    }
}
function nb_imgSelect(imgName) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_s.src');
        self.status = '';
    }
}
function nb_imgOver(imgName, nohints, descript) {
    if (document.images) {
        document[imgName].src = eval(imgName + '_o.src');
        if (! nohints) self.status = descript;
    }
}
// done hiding -->
</SCRIPT>

<STYLE type="text/css">
<!--
H1,H2,H3 {color: #4f4f4f}
A {text-decoration: underline;
   color: #f00ca4}
HR, H1, H2, DIV, P, LI,
UL, OL, TABLE, TD, TR {font-family: lucida-sans, helvetica, arial, sans-serif}
PRE {font-family: courier, typewriter, fixed}
H1 {font-size: 18pt }
H2 {font-size: 16pt }
DIV, P, LI,
UL, OL, TABLE, TD, TR {font-size: 12pt }
SMALL {font-size: 10pt}
-->
</STYLE>

<TITLE>Text::CPPTemplate - CPP-Style Templates</TITLE>
<LINK rev="made" href="mailto:dws@ee.ethz.ch">
</HEAD>
<BODY bgcolor="#bfbfbf" text="#000000" link="#f00ca4" vlink="#f00ca4" alink="#f00ca4">
<TABLE border="0" bgcolor="#ffffff" cellpadding="0" cellspacing="0" summary="">
<TR>
<TD valign="top">
<TABLE border="0" bgcolor="#ffffff" cellpadding="0" cellspacing="0" summary="">
<TR>
<TD rowspan="5" width="20"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="20" height="1" align="bottom" border="0"></TD>
<TD colspan="4"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="10" align="bottom" border="0"></TD>
</TR>

<TR>
<TD colspan="4" valign="top" align="left"><IMG src="../.pics/logo.png" alt="" width="390" height="70"></TD>
</TR>

<TR>
<TD colspan="4"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="20" align="bottom" border="0"></TD>
</TR>

<TR>
<TD rowspan="2" width="120" valign="top">
<DIV><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="50" align="bottom" border="0"></DIV>

<SCRIPT type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_about_n = new Image();
    nb_img1_about_n.src = '../.img/about-std.en.gif';
    nb_img1_about_o = new Image();
    nb_img1_about_o.src = '../.img/about-ovr.en.gif';
    nb_img1_doc_n = new Image();
    nb_img1_doc_n.src = '../.img/doc-std.en.gif';
    nb_img1_doc_o = new Image();
    nb_img1_doc_o.src = '../.img/doc-ovr.en.gif';
    nb_img1_screenshots_n = new Image();
    nb_img1_screenshots_n.src = '../.img/screenshots-std.en.gif';
    nb_img1_screenshots_o = new Image();
    nb_img1_screenshots_o.src = '../.img/screenshots-ovr.en.gif';
    nb_img1_download_n = new Image();
    nb_img1_download_n.src = '../.img/download-std.en.gif';
    nb_img1_download_o = new Image();
    nb_img1_download_o.src = '../.img/download-ovr.en.gif';
    nb_img1_people_n = new Image();
    nb_img1_people_n.src = '../.img/people-std.en.gif';
    nb_img1_people_o = new Image();
    nb_img1_people_o.src = '../.img/people-ovr.en.gif';
    nb_img1_mailinglist_n = new Image();
    nb_img1_mailinglist_n.src = '../.img/mailinglist-std.en.gif';
    nb_img1_mailinglist_o = new Image();
    nb_img1_mailinglist_o.src = '../.img/mailinglist-ovr.en.gif';
}
// done hiding -->
</SCRIPT>

 

<DIV><A href="../index.en.html" onmouseover="nb_imgOver('nb_img1_about', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_about'); return true" onfocus="nb_imgOver('nb_img1_about', 0, ''); return true" onblur="nb_imgNormal('nb_img1_about'); return true"><IMG name="nb_img1_about" src="../.img/about-std.en.gif" alt="About" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../doc/index.en.html" onmouseover="nb_imgOver('nb_img1_doc', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc'); return true" onfocus="nb_imgOver('nb_img1_doc', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc'); return true"><IMG name="nb_img1_doc" src="../.img/doc-std.en.gif" alt="Documentation" border="0" width="120" height="25"></A></DIV>

<SCRIPT type="text/javascript" language="JavaScript">
<!-- Hiding the code
if (document.images) {
    nb_img1_doc_frontend_n = new Image();
    nb_img1_doc_frontend_n.src = '../.img/doc_frontend-std.en.gif';
    nb_img1_doc_frontend_o = new Image();
    nb_img1_doc_frontend_o.src = '../.img/doc_frontend-ovr.en.gif';
    nb_img1_doc_database_n = new Image();
    nb_img1_doc_database_n.src = '../.img/doc_database-std.en.gif';
    nb_img1_doc_database_o = new Image();
    nb_img1_doc_database_o.src = '../.img/doc_database-ovr.en.gif';
    nb_img1_doc_pearls_n = new Image();
    nb_img1_doc_pearls_n.src = '../.img/doc_pearls-std.en.gif';
    nb_img1_doc_pearls_o = new Image();
    nb_img1_doc_pearls_o.src = '../.img/doc_pearls-ovr.en.gif';
    nb_img1_doc_pearlreports_n = new Image();
    nb_img1_doc_pearlreports_n.src = '../.img/doc_pearlreports-std.en.gif';
    nb_img1_doc_pearlreports_o = new Image();
    nb_img1_doc_pearlreports_o.src = '../.img/doc_pearlreports-ovr.en.gif';
}
// done hiding -->
</SCRIPT>

 

<DIV><A href="../doc/gedafe-user.en.html" onmouseover="nb_imgOver('nb_img1_doc_frontend', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_frontend'); return true" onfocus="nb_imgOver('nb_img1_doc_frontend', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_frontend'); return true"><IMG name="nb_img1_doc_frontend" src="../.img/doc_frontend-std.en.gif" alt="..Frontend" border="0" width="120" height="20"></A></DIV>

<DIV><A href="../doc/gedafe-sql.en.html" onmouseover="nb_imgOver('nb_img1_doc_database', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_database'); return true" onfocus="nb_imgOver('nb_img1_doc_database', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_database'); return true"><IMG name="nb_img1_doc_database" src="../.img/doc_database-std.en.gif" alt="..Database" border="0" width="120" height="20"></A></DIV>

<DIV><A href="../doc/gedafe-pearls.en.html" onmouseover="nb_imgOver('nb_img1_doc_pearls', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_pearls'); return true" onfocus="nb_imgOver('nb_img1_doc_pearls', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_pearls'); return true"><IMG name="nb_img1_doc_pearls" src="../.img/doc_pearls-std.en.gif" alt="..Gedafe Pearls" border="0" width="120" height="20"></A></DIV>

<DIV><A href="../doc/pearlreports.en.html" onmouseover="nb_imgOver('nb_img1_doc_pearlreports', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_doc_pearlreports'); return true" onfocus="nb_imgOver('nb_img1_doc_pearlreports', 0, ''); return true" onblur="nb_imgNormal('nb_img1_doc_pearlreports'); return true"><IMG name="nb_img1_doc_pearlreports" src="../.img/doc_pearlreports-std.en.gif" alt="..PearlReports" border="0" width="120" height="20"></A></DIV>

<DIV><IMG src="../.img/doc_cpptemplate-sel.en.gif" alt="..CPPTemplate" width="120" height="20"></DIV>

<DIV><A href="../screenshots.en.html" onmouseover="nb_imgOver('nb_img1_screenshots', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_screenshots'); return true" onfocus="nb_imgOver('nb_img1_screenshots', 0, ''); return true" onblur="nb_imgNormal('nb_img1_screenshots'); return true"><IMG name="nb_img1_screenshots" src="../.img/screenshots-std.en.gif" alt="Screenshots" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../download.en.html" onmouseover="nb_imgOver('nb_img1_download', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_download'); return true" onfocus="nb_imgOver('nb_img1_download', 0, ''); return true" onblur="nb_imgNormal('nb_img1_download'); return true"><IMG name="nb_img1_download" src="../.img/download-std.en.gif" alt="Download" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../people.en.html" onmouseover="nb_imgOver('nb_img1_people', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_people'); return true" onfocus="nb_imgOver('nb_img1_people', 0, ''); return true" onblur="nb_imgNormal('nb_img1_people'); return true"><IMG name="nb_img1_people" src="../.img/people-std.en.gif" alt="People" border="0" width="120" height="25"></A></DIV>

<DIV><A href="../mailinglist.en.html" onmouseover="nb_imgOver('nb_img1_mailinglist', 0, ''); return true" onmouseout="nb_imgNormal('nb_img1_mailinglist'); return true" onfocus="nb_imgOver('nb_img1_mailinglist', 0, ''); return true" onblur="nb_imgNormal('nb_img1_mailinglist'); return true"><IMG name="nb_img1_mailinglist" src="../.img/mailinglist-std.en.gif" alt="Mailing List" border="0" width="120" height="25"></A></DIV>

<DIV><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="60" align="bottom" border="0"></DIV>

<DIV><SMALL>Page Maintainer:<BR>
 <IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="10" height="1" align="bottom" border="0"><A href="mailto:dws@ee.ethz.ch">David Schweikert</A></SMALL></DIV>

<DIV><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="10" align="bottom" border="0"><BR>
 <SMALL>Last Update:<BR>
<IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="10" height="1" align="bottom" border="0">2001-05-10</SMALL></DIV>
</TD>
<TD rowspan="2" width="30"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="30" height="1" align="bottom" border="0"></TD>
<TD valign="top">
<DIV><IMG src="../.img/CPPTemplate_H1.en.gif" alt="CPPTemplate" width="500" height="50"></DIV>

<P><A name="__index__"></A></P>

<!-- INDEX BEGIN -->
<UL>
<LI><A href="#name">NAME</A></LI>

<LI><A href="#synopsis">SYNOPSIS</A></LI>

<LI><A href="#description">DESCRIPTION</A></LI>

<LI><A href="#file_names">FILE NAMES</A></LI>

<LI><A href="#variable_substitution">VARIABLE SUBSTITUTION</A></LI>

<LI><A href="#cppstyle_directives">CPP-STYLE DIRECTIVES</A></LI>

<LI><A href="#expressions">EXPRESSIONS</A></LI>

<LI><A href="#example">EXAMPLE</A></LI>

<LI><A href="#permethod_documentation">PER-METHOD DOCUMENTATION</A></LI>

<LI><A href="#see_also">SEE ALSO</A></LI>

<LI><A href="#copyright">COPYRIGHT</A></LI>

<LI><A href="#license">LICENSE</A></LI>

<LI><A href="#author">AUTHOR</A></LI>
</UL>

<!-- INDEX END -->
<HR>
<H1><A name="name">NAME</A></H1>

<P>Text::CPPTemplate - CPP-Style Templates</P>

<HR>
<H1><A name="synopsis">SYNOPSIS</A></H1>

<PRE>
 use Text::CPPTemplate;
</PRE>

<PRE>
 my $templ = new Text::CPPTemplate('/var/web/templates','.html');
</PRE>

<PRE>
 print $templ-&gt;template({
        PAGE =&gt; 'index',
        ELEMENT =&gt; 'header',
        TITLE =&gt; 'Test'
 });
</PRE>

<HR>
<H1><A name="description">DESCRIPTION</A></H1>

<P>CPPTemplate is a templating system using a CPP-style (C Pre-Processor) syntax. CPPTemplate is quite fast so that it can be used in online Applications such as CGI scripts to separate program the code from the HTML. CPPTemplate is not HTML specific, so it can be used for other applications. For performance reasons, the files containing the templates are read only once and are cached for further use. This is especially handy when working with long running scripts which use the same template over and over again. Apache mod_perl is such an environment.</P>

<P>An application can use a large number of templates. They could for example represent different parts of output generated by the aplication. Each template can contain variables and CPP style if-then-else structures. When the template gets activated, all the variables will get substituted and the if-then-else structures will get processed.</P>

<HR>
<H1><A name="file_names">FILE NAMES</A></H1>

<P>When you activate a template, you do not specify a file-name, but only variables. Based on the contents of some special variables, CPPTemplate will try to load an apropriate template file from disk. It tries to do this using a number of different file-names. The first one to exist will be used. A directory where the templates reside and a suffix have to be specified with the <A href="#item_new"><CODE>new</CODE></A> method. The following list shows which variables cause CPPTemplate to look for which files:</P>

<UL>
<LI style="list-style: none"><EM>PAGE</EM><STRONG>_</STRONG><EM>ELEMENT</EM> (<EM>PAGE</EM> and <EM>ELEMENT</EM> are variables)</LI>

<LI style="list-style: none"><EM>ELEMENT</EM></LI>

<LI style="list-style: none"><EM>PAGE</EM></LI>

<LI style="list-style: none"><CODE>default</CODE> (as is, not a variable)</LI>
</UL>

<P>In addition, if <EM>THEME</EM> is specified, the template will be first searched in the subdirectory specified by that variable of the templates directory.</P>

<P>In the example given in <A href="#synopsis">SYNOPSIS</A>, the following files will be opened in turn until one is found to exist (in the directory <EM>/var/web/templates</EM>): <EM>index_header.html</EM>, <EM>header.html</EM>, <EM>index.html</EM> and <EM>default.html</EM>.</P>

<HR>
<H1><A name="variable_substitution">VARIABLE SUBSTITUTION</A></H1>

<P>Variables are marked <CODE>##var##</CODE> in the templates. If no variable is found with that specified name, the ##var## text remains unchanged.</P>

<HR>
<H1><A name="cppstyle_directives">CPP-STYLE DIRECTIVES</A></H1>

<P>``MiniCPP'' directives permit the selection of parts of the template based on some condition. The language is very very basic, it seems to be good-enough for most applications. The following directives are supported:</P>

<DL>
<DT><STRONG><A name="item__2f_2f_comment"><CODE>// comment</CODE></A></STRONG><BR>
</DT>

<DD>The whole line is removed from the output</DD>

<DT><STRONG><A name="item__23ifdef_var"><CODE>#ifdef VAR</CODE></A></STRONG><BR>
</DT>

<DD>If variable VAR is defined, the following text will be selected.</DD>

<DT><STRONG><A name="item__23if_expr"><CODE>#if expr</CODE></A></STRONG><BR>
</DT>

<DD>If the expression <CODE>expr</CODE> evaluates to true (see <A href="#expressions">EXPRESSIONS</A>), the following text will be selected. You can use substitutions in the expression with the syntax '##VAR##'.</DD>

<DT><STRONG><A name="item__23elif_expr"><CODE>#elif expr</CODE></A></STRONG><BR>
</DT>

<DD>If the previous <CODE>#if</CODE> (or <CODE>#elif</CODE>) expression was false, evaluate this <CODE>expr</CODE> and if true select the following text.</DD>

<DT><STRONG><A name="item__23else"><CODE>#else</CODE></A></STRONG><BR>
</DT>

<DD>If the previous <CODE>#if</CODE> (or <CODE>#elif</CODE>) expression was false, select the following text.</DD>

<DT><STRONG><A name="item__23endif"><CODE>#endif</CODE></A></STRONG><BR>
</DT>

<DD>Ends an <CODE>#ifdef</CODE> or an <CODE>#if</CODE>.</DD>
</DL>

<P>Note that these elements can be nested.</P>

<P>The newlines will be removed unless two consecutive lines without MiniCPP directives are found. Spaces and tabs will be removed from the beginning and the end of each line. Use '\ ' (backslash space) to insert spaces at the beginning or the end of the line.</P>

<HR>
<H1><A name="expressions">EXPRESSIONS</A></H1>

<P>At the moment only the following expressions are supported (don't laugh :-))</P>

<DL>
<DT><STRONG><A name="item_a__3d_b">A = B</A></STRONG><BR>
</DT>

<DD>If A is equal to B (the text), then the expression is true.</DD>

<DT><STRONG><A name="item_a__7e_b">A ~ B</A></STRONG><BR>
</DT>

<DD>Match A against the regular expression (perl) B. True if it does match, false otherwise.</DD>
</DL>

<HR>
<H1><A name="example">EXAMPLE</A></H1>

<PRE>
 &lt;HR&gt;
     &lt;A href="##ADD_URL##"&gt;Add&lt;/A&gt;
     &lt;A href="##PREV_URL##"&gt;Prev&lt;/A&gt;
     &lt;A href="##NEXT_URL##"&gt;Next&lt;/A&gt;
   &lt;/P&gt;
<BR>


</PRE>

<H1><A name="permethod_documentation">PER-METHOD DOCUMENTATION</A></H1>

<DL>
<DT><STRONG><A name="item_new"><CODE>new($templates_dir, $suffix)</CODE></A></STRONG><BR>
</DT>

<DD>Create a new CPPTemplate object. <CODE>$templates_dir</CODE> is the directory where the templates are stored and <CODE>$suffix</CODE> is a text to append to the file-names.</DD>
</DL>

<PRE>
<BR>

</PRE>

<DL>
<DT><STRONG><A name="item_template"><CODE>template(\%vars)</CODE></A></STRONG><BR>
</DT>

<DD>Return a processed template. <CODE>\%vars</CODE> is a hashref containing the variables used for building the file-name, for the substitutions and the CPP-style directives.</DD>
</DL>

<PRE>
<BR>

<BR>


</PRE>

<H1><A name="see_also">SEE ALSO</A></H1>

<PRE>
<BR>
Text::TagTemplate(3)
<BR>


</PRE>

<H1><A name="copyright">COPYRIGHT</A></H1>

<PRE>
<BR>
Copyright (c) 2000 ETH Zurich, All rights reserved.
<BR>


</PRE>

<H1><A name="license">LICENSE</A></H1>

<PRE>
<BR>
This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.
<BR>
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
<BR>
You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
This library is free software; you can redistribute it and/or
modify it under the terms of the GNU Lesser General Public
License as published by the Free Software Foundation; either
version 2.1 of the License, or (at your option) any later version.
<BR>


</PRE>

<H1><A name="author">AUTHOR</A></H1>

<PRE>
<BR>
David Schweikert &lt;<A href="mailto:dws@ee.ethz.ch">dws@ee.ethz.ch</A>&gt;,
Tobi Oetiker &lt;<a href="http://tobi.oetiker.ch/">tobi@oetiker.ch</A>&gt;


</PRE>

&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</TD>
<TD rowspan="2" widht="0"><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="0" height="1" align="bottom" border="0"></TD>
</TR>

<TR>
<TD><IMG src=".img/imgdot-1x1-transp-ffffff.gif" alt="" width="1" height="20" align="bottom" border="0"></TD>
</TR>
</TABLE>
</TD>
<TD valign="TOP" align="RIGHT"><IMG src="../.img/cpptemplate_Decor.en.gif" alt="" width="100" height="600"></TD>
</TR>
</TABLE>
</BODY>
</HTML>

